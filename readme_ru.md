# BetterData [![version](svg/version.svg)](https://github.com/gmankab/betterdata) [![python](svg/python.svg)](https://www.python.org)

[![telegram](svg/telegram.svg)](https://t.me/gmanka)
[![discord](svg/discord.svg)](https://discordapp.com/users/396578935540023296)
[![github](svg/github.svg)](https://github.com/gmankab/betterdata)

```text
oooooooooo.   oooooooooo.
`888'   `Y8b  `888'   `Y8b
 888     888   888      888
 888oooo888'   888      888
 888    `88b   888      888
 888    .88P   888     d88'
o888bood8P'   o888bood8P'

```

## Language, Язык

- [english](readme.md)
- [русский, russian [открыт сейчас]](readme_ru.md)

## Оглавление

- [Принципы](#принципы)
- [Установка](#установка)
- [Документация](#документация)
  - [Функции](#функции)
    - [bd.install_libs()](#install-libs)

## Принципы

- Минимальный вес
- Максимальная стабильность
- Портативность, то есть никаких установок и компиляций, все файлы запускаются сразу из коробки, а весь свой мусор хранят рядом со своей папкой и не мусорят в системе.
- Я тестирую betterdata только на последней версии python
- betterdata тестируется только на windows и linux, работает одинаково на любой операционной системе.
В будущем я перестану тестировать betterdata на windows, но betterdata все равно продолжит работать на windows.
- По возможности откажитесь от использования
pip по следующим причинам:
  - pip весит довольно много - 15 мегабайт. Если вы используете python embeddable на windows, который тоже весит 15 мегабайт, то после установки pip вес папки увеличится в 2 раза - до 30 мегабайт. Вы должны быть заинтересованы в том, чтобы ваш проект и все необходимое для его работы имело минимальный вес, чтобы юзер не боялся его скачать и не хотел его удалять.
  - pip хранит все библиотеке в папке python. Во-первых из-за этого папка python очень быстро растет в размере. Во вторых это противоречит идее портативности (см. [Принципы](#принципы)). Портативная программа должна хранить все нужные библиотеке в своей папке, а не в папке python. В третьих, хранение всех библиотек в одном месте вызывает конфликты версий, если 2 разные программы требуют 2 разные версии одной и той же библиотеки.
  - pip нестабилен, установка пакета через pip может завершиться с ошибкой. Безусловно, если вы знакомы с python и pip, то для вас не будет особой проблемой решить ошибку. Давайте подумаем, что будет когда вы пустите свой код в прод. Либо вы не используете сторонние библиотеки, либо поставляете свой код вместе с библиотеками, которые ваш код распакует после запуска, либо вы встроите в свою программу способ загрузить все нужные библиотеки из интернета. Если делать это через pip, то у юзера может возникнуть ошибка во время установки пакета. Поэтому betterdata содержит в себе написанный мною легковесный и стабильный способ загрузки библиотек, подробнее о котором далее в документации.
  - Конечно, betterdata никак не конфликтует с pip, и если он вам нужен, вы можете продолжать его использовать.

## Установка

Т. к. я не люблю pip, сейчас скачать betterdata можно только со страницы [github releases](https://github.com/gmankab/betterdata/releases). Возможно в будущем betterdata можно будет
установить через pip, когда я найду время этим заняться.

Библиотека betterdata состоит из всего одного python файла, который автоматически установит все зависимости нужных версий без использования pip. Скачайте последнюю версию по [прямой ссылке](https://raw.githubusercontent.com/gmankab/betterdata/main/latest_release/bd.py) или со страницы [github releases](https://github.com/gmankab/betterdata/releases) файл bd.py и положите его в папку вашего python проекта. Если вы открыли прямую ссылку через браузер, то чтобы скачать файл надо нажать <kbd>ctrl-s</kbd>.

Создадим папку под названием `project` для нашего нового проекта. В этой папке создадим файл `main.py`, тогда папка вашего проекта будет выглядеть вот так:

```diff
+ project/
  ├── bd.py
  └── main.py
```

Я пометил папку зеленым цветом, чтобы папки было удобнее отличать от файлов.

Откройте `main.py` и импортируйте в него библиотеку betterdata:

```py
import bd
```

Попробуйте запустить файл.

<br />
<details>
  <summary>
    Получаете ошибку "No module named 'bd'"?
  </summary>
  <br />
  Если вы получаете ошибку

  ```py
  ModuleNotFoundError: No module named 'bd'
  ```

  Для начала убедитесь, что `main.py` и `bd.py` находятся в одной папке. Если все так, но ошибка все равно появляется, значит вы запускаете `main.py` не из папки `project/`. Вам нужно либо [перейти в папку](https://www.google.com/search?q=how+to+change+folder+in+terminal) `project/` в вашем терминале и запустить `main.py` оттуда, либо добавить папку `project/` в sys.path с помощью этого кода:

  ```py
  import pathlib
  import sys

  sys.path.append(
      str(pathlib.Path(__file__).parent)
  )

  import bd
  ```

  Теперь файл должен запускаться без ошибок.

</details>
<br />

После первого запуска вы сразу увидите, как betterdata начала скачивать свои зависимости:

```text
Downloading requirements for betterdata...
Done. Restarting...
```

После этого в папке вашего проекта появится архив bd_libs.zip:

```diff
+ project/
  ├── bd.py
  ├── bd_libs.zip
  └── main.py
```

## Документация

### функции

#### install-libs

```py
bd.install_libs()
```

Эта функция автоматизирует загрузку нужных вам библиотек.

Как вы уже заметили, betterdata сама скачивает для себя библиотеки при первом запуске, благодаря этому файл betterdata распространяется как один единственный файл, который сразу готов к запуску на любом устройстве и на любой операционной системе. Хотите так же? Отлично.

Запомните, устанавливать библиотеки на любые устройства через betterdata можно только в том случае, если эта библиотека написана на python, и не содержит никакого когда на других языках. Python всегда работает одинаково на любых устройствах и операционных системах, поэтому код на python готов к работе сразу после скачивания, в то время как другие языки работают по-разному на разных устройствах. Поэтому, библиотеки `pillow`, `pygame`, `numpy` и `pandas`, содержащие в себе код на других языках, все же прийдется устанавливать через pip, чтобы pip скомпилировал их специально под ваше устройство.

Начнем знакомство с функцией `bd.install_libs()` с автоматизации установки библиотеки requests. Для этого нам нужно скачать последнюю версию этой библиотеки и залить ее на github, чтобы получить прямую ссылку на архив с библиотекой, и иметь возможность скачивать эту библиотеку по нашей собственной ссылке. Не беспокойтесь, это очень просто, бесплатно, и навсегда. Так мы будем уверены что эта ссылка всегда будет работать, и файл по ссылке никто не удалит.

На первый раз нам все-же придется скачать эту библиотеку через [pip](https://pip.pypa.io/en/stable/installation/). Создадим в папке нашего проекта папку `project_libs_dir/`, после этого папка нашего проекта будет выглядеть так:

```diff
+ project/
  ├── bd.py
  ├── bd_libs.zip
  ├── main.py
+ └── project_libs_dir/
```

Теперь откроем папку нашего проекта в терминале, и введем в терминал эту команду:

```sh
pip install requests -t project_libs_dir
```

Можете запустить эту команду еще раз, чтобы установить другие нужные библиотеки. `requests` - название библиотеки, которую мы устанавливаем, а `project_libs_dir` - название папки, в которую устанавливаем библиотеку. После запуска этой команды в папку `project_libs_dir` установится библиотека `requests` и все ее зависимости нужных версий:

```diff
+ project/
  ├── bd.py
  ├── bd_libs.zip
  ├── main.py
+ └── project_libs_dir/
+     ├── bin/
+     ├── certifi/
+     ├── certifi-2021.10.8.dist-info/
+     ├── charset_normalizer/
+     ├── charset_normalizer-2.0.12.dist-info/
+     ├── idna/
+     ├── idna-3.3.dist-info/
+     ├── requests/
+     ├── requests-2.27.1.dist-info/
+     ├── urllib3/
+     └── urllib3-1.26.8.dist-info/
```

Напоминаю, что зеленым цветом помечены папки.

Теперь давайте добавим все содержимое папки `project_libs_dir` в архив, который назовем `project_libs.zip`. Очень важно не перепутать и добавить именно содержимое папки `project_libs_dir`, а не саму папку. Когда вы откроете архив, он должен выглядеть вот так:

```diff
- project_libs.zip
+ ├── bin/
+ ├── certifi/
+ ├── certifi-2021.10.8.dist-info/
+ ├── charset_normalizer/
+ ├── charset_normalizer-2.0.12.dist-info/
+ ├── idna/
+ ├── idna-3.3.dist-info/
+ ├── requests/
+ ├── requests-2.27.1.dist-info/
+ ├── urllib3/
+ └── urllib3-1.26.8.dist-info/
```

Красным цветом помечен открытый архив, а зеленым - папки, которые мы положили в этот архив.

Теперь папку `project_libs_dir` можно удалить, а папка проекта должна выглядеть вот так:

```diff
+ project/
  ├── bd.py
  ├── bd_libs.zip
  ├── main.py
  └── project_libs.zip
```